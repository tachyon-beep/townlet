# Configuration Reference (Generated)

This file is generated by `scripts/gen_config_reference.py`. Do not edit manually.

For an overview and examples, see docs/architecture_review/townlet-target-architecture.md.


## townlet.config.conflict


### ConflictConfig (townlet.config.conflict)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `rivalry` | `RivalryConfig` | `RivalryConfig(increment_per_conflict=0.15, decay_per_tick=0.005, min_value=0.0, max_value=1.0, avoid_threshold=0.7, eviction_threshold=0.05, max_edges=6, ghost_step_boost=1.5, handover_boost=0.4, queue_length_boost=0.25)` |  |


### QueueFairnessConfig (townlet.config.conflict)

Queue fairness tuning parameters (see REQUIREMENTS#5).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `cooldown_ticks` | `int` | `60` |  |
| `ghost_step_after` | `int` | `3` |  |
| `age_priority_weight` | `float` | `0.1` |  |


### RivalryConfig (townlet.config.conflict)

Conflict/rivalry tuning knobs (see REQUIREMENTS#5).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `increment_per_conflict` | `float` | `0.15` |  |
| `decay_per_tick` | `float` | `0.005` |  |
| `min_value` | `float` | `0.0` |  |
| `max_value` | `float` | `1.0` |  |
| `avoid_threshold` | `float` | `0.7` |  |
| `eviction_threshold` | `float` | `0.05` |  |
| `max_edges` | `int` | `6` |  |
| `ghost_step_boost` | `float` | `1.5` |  |
| `handover_boost` | `float` | `0.4` |  |
| `queue_length_boost` | `float` | `0.25` |  |


## townlet.config.console_auth


### ConsoleAuthConfig (townlet.config.console_auth)

Authentication settings for console and telemetry command ingress.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `enabled` | `bool` | `False` |  |
| `require_auth_for_viewer` | `bool` | `True` |  |
| `tokens` | `list` | `<factory>` |  |


### ConsoleAuthTokenConfig (townlet.config.console_auth)

Configuration entry for a single console authentication token.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `label` | `str | None` | `<none>` |  |
| `role` | `Literal` | `'viewer'` |  |
| `token` | `str | None` | `<none>` |  |
| `token_env` | `str | None` | `<none>` |  |


## townlet.config.core


### FloatRange (townlet.config.core)

Helper schema describing inclusive float ranges.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `min` | `float` | `PydanticUndefined` |  |
| `max` | `float` | `PydanticUndefined` |  |


### IntRange (townlet.config.core)

Helper schema describing inclusive integer ranges.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `min` | `int` | `PydanticUndefined` |  |
| `max` | `int` | `PydanticUndefined` |  |


## townlet.config.flags


### BehaviorFlags (townlet.config.flags)

Feature toggles for behaviour modules injected into the policy.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `personality_profiles` | `bool` | `False` |  |
| `reward_multipliers` | `bool` | `False` |  |


### ConsoleFlags (townlet.config.flags)

Default console mode advertised when auth is optional.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `mode` | `Literal` | `'viewer'` |  |


### FeatureFlags (townlet.config.flags)

Aggregate feature flag surface exposed in YAML configs.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `stages` | `StageFlags` | `PydanticUndefined` |  |
| `systems` | `SystemFlags` | `PydanticUndefined` |  |
| `training` | `TrainingFlags` | `PydanticUndefined` |  |
| `console` | `ConsoleFlags` | `PydanticUndefined` |  |
| `relationship_modifiers` | `bool` | `False` |  |
| `behavior` | `BehaviorFlags` | `BehaviorFlags(personality_profiles=False, reward_multipliers=False)` |  |
| `observations` | `ObservationFeatureFlags` | `ObservationFeatureFlags(personality_channels=False, personality_ui=False)` |  |


### ObservationFeatureFlags (townlet.config.flags)

Observation variant feature toggles (UI overlays, metadata).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `personality_channels` | `bool` | `False` |  |
| `personality_ui` | `bool` | `False` |  |


### PolicyRuntimeConfig (townlet.config.flags)

Configure runtime policy behaviour (e.g., option commit duration).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `option_commit_ticks` | `int` | `15` |  |


### StageFlags (townlet.config.flags)

Configure high-level feature stage toggles.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `relationships` | `Literal` | `'OFF'` |  |
| `social_rewards` | `Literal` | `'OFF'` |  |


### SystemFlags (townlet.config.flags)

Toggle major runtime subsystems such as lifecycle and observations.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `lifecycle` | `Literal` | `'on'` |  |
| `observations` | `Literal` | `'hybrid'` |  |


### TrainingFlags (townlet.config.flags)

Enable/disable training-time behaviours such as curiosity.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `curiosity` | `Literal` | `'phase_A'` |  |


## townlet.config.observations


### CompactObservationConfig (townlet.config.observations)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `map_window` | `int` | `7` |  |
| `include_targets` | `bool` | `False` |  |
| `object_channels` | `list` | `<factory>` |  |
| `normalize_counts` | `bool` | `True` |  |


### HybridObservationConfig (townlet.config.observations)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `local_window` | `int` | `11` | Odd window size for local observation slice |
| `include_targets` | `bool` | `False` |  |
| `time_ticks_per_day` | `int` | `1440` |  |


### ObservationsConfig (townlet.config.observations)

Bundle observation variants consumed by ObservationBuilder.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `hybrid` | `HybridObservationConfig` | `HybridObservationConfig(local_window=11, include_targets=False, time_ticks_per_day=1440)` |  |
| `compact` | `CompactObservationConfig` | `CompactObservationConfig(map_window=7, include_targets=False, object_channels=[], normalize_counts=True)` |  |
| `social_snippet` | `SocialSnippetConfig` | `SocialSnippetConfig(top_friends=2, top_rivals=2, embed_dim=8, include_aggregates=True)` |  |


### SocialSnippetConfig (townlet.config.observations)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `top_friends` | `int` | `2` |  |
| `top_rivals` | `int` | `2` |  |
| `embed_dim` | `int` | `8` |  |
| `include_aggregates` | `bool` | `True` |  |


## townlet.config.personalities


### PersonalityAssignmentConfig (townlet.config.personalities)

Configure personality profile distribution and overrides.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `distribution` | `dict` | `<factory>` |  |
| `overrides` | `dict` | `<factory>` |  |


## townlet.config.policy


### PPOConfig (townlet.config.policy)

Config for PPO training hyperparameters.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `learning_rate` | `float` | `0.0003` | Optimizer learning rate |
| `clip_param` | `float` | `0.2` | Policy ratio clip parameter |
| `value_loss_coef` | `float` | `0.5` | Weight of value loss term |
| `entropy_coef` | `float` | `0.01` | Entropy bonus weight |
| `num_epochs` | `int` | `4` | Epochs per PPO update |
| `mini_batch_size` | `int` | `32` | Minibatch size for PPO updates |
| `gae_lambda` | `float` | `0.95` | GAE lambda |
| `gamma` | `float` | `0.99` | Discount factor |
| `max_grad_norm` | `float` | `0.5` | Max gradient norm for clipping |
| `value_clip` | `float` | `0.2` | Clipping for value function updates |
| `advantage_normalization` | `bool` | `True` |  |
| `num_mini_batches` | `int` | `4` | Number of minibatches per epoch |


## townlet.config.rewards


### CuriosityConfig (townlet.config.rewards)

Configure curiosity-style intrinsic reward weighting.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `phase_A_weight` | `float` | `0.02` |  |
| `decay_by_milestone` | `str` | `'M2'` |  |


### NeedsWeights (townlet.config.rewards)

Weighting applied to hunger/hygiene/energy reward terms.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `hunger` | `float` | `1.0` |  |
| `hygiene` | `float` | `0.6` |  |
| `energy` | `float` | `0.8` |  |


### OptionThrashCanaryConfig (townlet.config.rewards)

Track how frequently agents swap options to flag thrashing.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `window_ticks` | `int` | `600` |  |
| `max_switch_rate` | `float` | `0.25` |  |
| `min_samples` | `int` | `10` |  |


### PromotionGateConfig (townlet.config.rewards)

Thresholds applied when deciding whether to promote policies.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `required_passes` | `int` | `2` |  |
| `window_ticks` | `int` | `1000` |  |
| `allowed_alerts` | `tuple` | `()` |  |


### RewardClips (townlet.config.rewards)

Reward clipping constraints for per-tick and per-episode rewards.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `clip_per_tick` | `float` | `0.2` |  |
| `clip_per_episode` | `float` | `50` |  |
| `no_positive_within_death_ticks` | `int` | `10` |  |


### RewardVarianceCanaryConfig (townlet.config.rewards)

Alert when episodic reward variance spikes beyond limits.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `window_ticks` | `int` | `1000` |  |
| `max_variance` | `float` | `0.25` |  |
| `min_samples` | `int` | `20` |  |


### RewardsConfig (townlet.config.rewards)

Top-level reward configuration consumed by RewardEngine.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `needs_weights` | `NeedsWeights` | `PydanticUndefined` |  |
| `decay_rates` | `dict` | `<factory>` |  |
| `punctuality_bonus` | `float` | `0.05` |  |
| `wage_rate` | `float` | `0.01` |  |
| `survival_tick` | `float` | `0.002` |  |
| `faint_penalty` | `float` | `-1.0` |  |
| `eviction_penalty` | `float` | `-2.0` |  |
| `social` | `SocialRewardWeights` | `SocialRewardWeights(C1_chat_base=0.01, C1_coeff_trust=0.3, C1_coeff_fam=0.2, C2_avoid_conflict=0.005)` |  |
| `clip` | `RewardClips` | `RewardClips(clip_per_tick=0.2, clip_per_episode=50, no_positive_within_death_ticks=10)` |  |


### ShapingConfig (townlet.config.rewards)

Reward shaping configuration (potential-based shaping toggles).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `use_potential` | `bool` | `True` |  |


### SocialRewardWeights (townlet.config.rewards)

Reward shaping multipliers used by the social reward engine.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `C1_chat_base` | `float` | `0.01` |  |
| `C1_coeff_trust` | `float` | `0.3` |  |
| `C1_coeff_fam` | `float` | `0.2` |  |
| `C2_avoid_conflict` | `float` | `0.005` |  |


### StabilityConfig (townlet.config.rewards)

Aggregate stability thresholds surfaced to telemetry & promotion.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `affordance_fail_threshold` | `int` | `5` |  |
| `lateness_threshold` | `int` | `3` |  |
| `starvation` | `StarvationCanaryConfig` | `StarvationCanaryConfig(window_ticks=1000, max_incidents=0, hunger_threshold=0.05, min_duration_ticks=30)` |  |
| `reward_variance` | `RewardVarianceCanaryConfig` | `RewardVarianceCanaryConfig(window_ticks=1000, max_variance=0.25, min_samples=20)` |  |
| `option_thrash` | `OptionThrashCanaryConfig` | `OptionThrashCanaryConfig(window_ticks=600, max_switch_rate=0.25, min_samples=10)` |  |
| `promotion` | `PromotionGateConfig` | `PromotionGateConfig(required_passes=2, window_ticks=1000, allowed_alerts=())` |  |


### StarvationCanaryConfig (townlet.config.rewards)

Detect prolonged starvation incidents for stability monitoring.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `window_ticks` | `int` | `1000` |  |
| `max_incidents` | `int` | `0` |  |
| `hunger_threshold` | `float` | `0.05` |  |
| `min_duration_ticks` | `int` | `30` |  |


## townlet.config.runtime


### RuntimeProviderConfig (townlet.config.runtime)

Selects a runtime provider registered in the factory registry.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `provider` | `str` | `'default'` |  |
| `options` | `dict` | `<factory>` |  |


### RuntimeProviders (townlet.config.runtime)

Grouping of runtime provider descriptors.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `world` | `RuntimeProviderConfig` | `<factory>` |  |
| `policy` | `RuntimeProviderConfig` | `<factory>` |  |
| `telemetry` | `RuntimeProviderConfig` | `<factory>` |  |


## townlet.config.scheduler


### ArrangedMeetEventConfig (townlet.config.scheduler)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `kind` | `Literal` | `<PerturbationKind.ARRANGED_MEET: 'arranged_meet'>` |  |
| `probability_per_day` | `float` | `0.0` |  |
| `cooldown_ticks` | `int` | `0` |  |
| `duration` | `IntRange` | `<factory>` |  |
| `target` | `str` | `'top_rivals'` |  |
| `location` | `str` | `'cafe'` |  |
| `max_participants` | `int` | `2` |  |


### BasePerturbationEventConfig (townlet.config.scheduler)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `kind` | `PerturbationKind` | `PydanticUndefined` |  |
| `probability_per_day` | `float` | `0.0` |  |
| `cooldown_ticks` | `int` | `0` |  |
| `duration` | `IntRange` | `<factory>` |  |


### BlackoutEventConfig (townlet.config.scheduler)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `kind` | `Literal` | `<PerturbationKind.BLACKOUT: 'blackout'>` |  |
| `probability_per_day` | `float` | `0.0` |  |
| `cooldown_ticks` | `int` | `0` |  |
| `duration` | `IntRange` | `<factory>` |  |
| `utility` | `Literal` | `'power'` |  |


### FloatRange (townlet.config.scheduler)

Helper schema describing inclusive float ranges.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `min` | `float` | `PydanticUndefined` |  |
| `max` | `float` | `PydanticUndefined` |  |


### IntRange (townlet.config.scheduler)

Helper schema describing inclusive integer ranges.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `min` | `int` | `PydanticUndefined` |  |
| `max` | `int` | `PydanticUndefined` |  |


### OutageEventConfig (townlet.config.scheduler)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `kind` | `Literal` | `<PerturbationKind.OUTAGE: 'outage'>` |  |
| `probability_per_day` | `float` | `0.0` |  |
| `cooldown_ticks` | `int` | `0` |  |
| `duration` | `IntRange` | `<factory>` |  |
| `utility` | `Literal` | `'water'` |  |


### PerturbationSchedulerConfig (townlet.config.scheduler)

Configure the perturbation scheduler and event catalogue.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `max_concurrent_events` | `int` | `1` |  |
| `global_cooldown_ticks` | `int` | `0` |  |
| `per_agent_cooldown_ticks` | `int` | `0` |  |
| `grace_window_ticks` | `int` | `60` |  |
| `window_ticks` | `int` | `1440` |  |
| `max_events_per_window` | `int` | `1` |  |
| `events` | `dict` | `<factory>` |  |


### PriceSpikeEventConfig (townlet.config.scheduler)

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `kind` | `Literal` | `<PerturbationKind.PRICE_SPIKE: 'price_spike'>` |  |
| `probability_per_day` | `float` | `0.0` |  |
| `cooldown_ticks` | `int` | `0` |  |
| `duration` | `IntRange` | `<factory>` |  |
| `magnitude` | `FloatRange` | `<factory>` |  |
| `targets` | `list` | `<factory>` |  |


## townlet.config.snapshots


### SnapshotAutosaveConfig (townlet.config.snapshots)

Autosave cadence and retention settings.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `cadence_ticks` | `int | None` | `<none>` |  |
| `retain` | `int` | `3` |  |


### SnapshotConfig (townlet.config.snapshots)

Grouping of snapshot-related configuration sections.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `storage` | `SnapshotStorageConfig` | `SnapshotStorageConfig(root=PosixPath('snapshots'))` |  |
| `autosave` | `SnapshotAutosaveConfig` | `SnapshotAutosaveConfig(cadence_ticks=None, retain=3)` |  |
| `identity` | `SnapshotIdentityConfig` | `SnapshotIdentityConfig(observation_variant='infer', policy_hash=None, policy_artifact=None, anneal_ratio=None)` |  |
| `migrations` | `SnapshotMigrationsConfig` | `SnapshotMigrationsConfig(handlers={}, auto_apply=False, allow_minor=False)` |  |
| `guardrails` | `SnapshotGuardrailsConfig` | `SnapshotGuardrailsConfig(require_exact_config=True, allow_downgrade=False, allowed_paths=[])` |  |
| `capture_on_failure` | `bool` | `False` |  |


### SnapshotGuardrailsConfig (townlet.config.snapshots)

Snapshot validation guardrails and allowlists.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `require_exact_config` | `bool` | `True` |  |
| `allow_downgrade` | `bool` | `False` |  |
| `allowed_paths` | `list` | `<factory>` |  |


### SnapshotIdentityConfig (townlet.config.snapshots)

Identity metadata embedded in snapshot files.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `observation_variant` | `Literal` | `'infer'` |  |
| `policy_hash` | `str | None` | `<none>` |  |
| `policy_artifact` | `pathlib.Path | None` | `<none>` |  |
| `anneal_ratio` | `float | None` | `<none>` |  |


### SnapshotMigrationsConfig (townlet.config.snapshots)

Toggle for applying snapshot migrations on load.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `handlers` | `dict` | `<factory>` |  |
| `auto_apply` | `bool` | `False` |  |
| `allow_minor` | `bool` | `False` |  |


### SnapshotStorageConfig (townlet.config.snapshots)

Location and retention policy for snapshot storage.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `root` | `Path` | `PosixPath('snapshots')` |  |


## townlet.config.telemetry


### NarrationThrottleConfig (townlet.config.telemetry)

Rate limiting knobs for narration output.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `global_cooldown_ticks` | `int` | `30` |  |
| `category_cooldown_ticks` | `dict` | `<factory>` |  |
| `dedupe_window_ticks` | `int` | `20` |  |
| `global_window_ticks` | `int` | `600` |  |
| `global_window_limit` | `int` | `10` |  |
| `priority_categories` | `list` | `<factory>` |  |


### PersonalityNarrationConfig (townlet.config.telemetry)

Narration toggles tied to personality events.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `enabled` | `bool` | `True` |  |
| `chat_extroversion_threshold` | `float` | `0.5` |  |
| `chat_priority_threshold` | `float` | `0.75` |  |
| `chat_quality_threshold` | `float` | `0.3` |  |
| `conflict_tolerance_threshold` | `float` | `0.95` |  |


### RelationshipNarrationConfig (townlet.config.telemetry)

Narration thresholds for relationship events.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `friendship_trust_threshold` | `float` | `0.6` |  |
| `friendship_delta_threshold` | `float` | `0.25` |  |
| `friendship_priority_threshold` | `float` | `0.85` |  |
| `rivalry_avoid_threshold` | `float` | `0.7` |  |
| `rivalry_escalation_threshold` | `float` | `0.9` |  |


### TelemetryBufferConfig (townlet.config.telemetry)

Buffering thresholds controlling flush cadence.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `max_batch_size` | `int` | `32` |  |
| `max_buffer_bytes` | `int` | `256000` |  |
| `flush_interval_ticks` | `int` | `1` |  |


### TelemetryConfig (townlet.config.telemetry)

Top-level telemetry configuration surfaces.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `narration` | `NarrationThrottleConfig` | `NarrationThrottleConfig(global_cooldown_ticks=30, category_cooldown_ticks={}, dedupe_window_ticks=20, global_window_ticks=600, global_window_limit=10, priority_categories=[])` |  |
| `transport` | `TelemetryTransportConfig` | `TelemetryTransportConfig(type='stdout', endpoint=None, file_path=None, connect_timeout_seconds=5.0, send_timeout_seconds=1.0, enable_tls=False, verify_hostname=True, ca_file=None, cert_file=None, key_file=None, allow_plaintext=False, dev_allow_plaintext=False, websocket_url=None, retry=TelemetryRetryPolicy(max_attempts=3, backoff_seconds=0.5), buffer=TelemetryBufferConfig(max_batch_size=32, max_buffer_bytes=256000, flush_interval_ticks=1), worker_poll_seconds=0.5)` |  |
| `relationship_narration` | `RelationshipNarrationConfig` | `RelationshipNarrationConfig(friendship_trust_threshold=0.6, friendship_delta_threshold=0.25, friendship_priority_threshold=0.85, rivalry_avoid_threshold=0.7, rivalry_escalation_threshold=0.9)` |  |
| `personality_narration` | `PersonalityNarrationConfig` | `PersonalityNarrationConfig(enabled=True, chat_extroversion_threshold=0.5, chat_priority_threshold=0.75, chat_quality_threshold=0.3, conflict_tolerance_threshold=0.95)` |  |
| `diff_enabled` | `bool` | `True` |  |
| `transforms` | `TelemetryTransformsConfig` | `TelemetryTransformsConfig(pipeline=[])` |  |
| `worker` | `TelemetryWorkerConfig` | `TelemetryWorkerConfig(backpressure='drop_oldest', block_timeout_seconds=0.5, restart_limit=3)` |  |


### TelemetryRetryPolicy (townlet.config.telemetry)

Retry/backoff policy applied to telemetry transports.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `max_attempts` | `int` | `3` |  |
| `backoff_seconds` | `float` | `0.5` |  |


### TelemetryTransformEntry (townlet.config.telemetry)

Describes a single transform within the telemetry pipeline.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `id` | `str` | `PydanticUndefined` |  |
| `options` | `dict` | `<factory>` |  |


### TelemetryTransformsConfig (townlet.config.telemetry)

Configuration block describing telemetry transform pipeline.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `pipeline` | `list` | `<factory>` |  |


### TelemetryTransportConfig (townlet.config.telemetry)

Transport-specific telemetry configuration.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `type` | `Literal` | `'stdout'` |  |
| `endpoint` | `str | None` | `<none>` |  |
| `file_path` | `pathlib.Path | None` | `<none>` |  |
| `connect_timeout_seconds` | `float` | `5.0` |  |
| `send_timeout_seconds` | `float` | `1.0` |  |
| `enable_tls` | `bool` | `True` |  |
| `verify_hostname` | `bool` | `True` |  |
| `ca_file` | `pathlib.Path | None` | `<none>` |  |
| `cert_file` | `pathlib.Path | None` | `<none>` |  |
| `key_file` | `pathlib.Path | None` | `<none>` |  |
| `allow_plaintext` | `bool` | `False` |  |
| `dev_allow_plaintext` | `bool` | `False` |  |
| `websocket_url` | `str | None` | `<none>` |  |
| `retry` | `TelemetryRetryPolicy` | `TelemetryRetryPolicy(max_attempts=3, backoff_seconds=0.5)` |  |
| `buffer` | `TelemetryBufferConfig` | `TelemetryBufferConfig(max_batch_size=32, max_buffer_bytes=256000, flush_interval_ticks=1)` |  |
| `worker_poll_seconds` | `float` | `0.5` |  |


### TelemetryWorkerConfig (townlet.config.telemetry)

Worker coordination and backpressure strategy settings.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `backpressure` | `Literal` | `'drop_oldest'` |  |
| `block_timeout_seconds` | `float` | `0.5` |  |
| `restart_limit` | `int` | `3` |  |


## townlet.config.world_config


### AffordanceConfig (townlet.config.world_config)

Top-level affordance configuration (manifest + runtime).

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `affordances_file` | `str` | `'configs/affordances/core.yaml'` |  |
| `runtime` | `AffordanceRuntimeConfig` | `AffordanceRuntimeConfig(factory=None, instrumentation='off', options={}, hook_allowlist=(), allow_env_hooks=True)` |  |


### AffordanceRuntimeConfig (townlet.config.world_config)

Runtime affordance tuning flags.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `factory` | `str | None` | `<none>` |  |
| `instrumentation` | `Literal` | `'off'` |  |
| `options` | `dict` | `<factory>` |  |
| `hook_allowlist` | `tuple` | `<factory>` |  |
| `allow_env_hooks` | `bool` | `True` |  |


### BehaviorConfig (townlet.config.world_config)

Configuration namespace for scripted behaviours.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `hunger_threshold` | `float` | `0.4` |  |
| `hygiene_threshold` | `float` | `0.4` |  |
| `energy_threshold` | `float` | `0.4` |  |
| `job_arrival_buffer` | `int` | `20` |  |


### EmploymentConfig (townlet.config.world_config)

Employment system knobs for queues and wages.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `grace_ticks` | `int` | `5` |  |
| `absent_cutoff` | `int` | `30` |  |
| `absence_slack` | `int` | `20` |  |
| `late_tick_penalty` | `float` | `0.005` |  |
| `absence_penalty` | `float` | `0.2` |  |
| `max_absent_shifts` | `int` | `3` |  |
| `attendance_window` | `int` | `3` |  |
| `daily_exit_cap` | `int` | `2` |  |
| `exit_queue_limit` | `int` | `8` |  |
| `exit_review_window` | `int` | `1440` |  |
| `enforce_job_loop` | `bool` | `False` |  |


### LifecycleConfig (townlet.config.world_config)

Lifecycle timing controls for respawn/reset flows.

| Field | Type | Default | Description |
| --- | --- | --- | --- |
| `respawn_delay_ticks` | `int` | `0` |  |

